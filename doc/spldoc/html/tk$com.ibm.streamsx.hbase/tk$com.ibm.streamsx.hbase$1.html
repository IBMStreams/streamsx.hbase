<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xml:lang="en-us" lang="en-us">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta name="copyright" content="(C) Copyright 2005"/>
<meta name="DC.rights.owner" content="(C) Copyright 2005"/>
<meta name="DC.Type" content="reference"/>
<meta name="DC.Title" content="Developing and running applications that use the HBase Toolkit"/>
<meta name="DC.Format" content="XHTML"/>
<meta name="DC.Identifier" content="spldoc_page"/>
<link rel="stylesheet" type="text/css" href="../../html/commonltr.css"/>
<link rel="stylesheet" type="text/css" href="../../html/spldoc.css"/>
<title>Developing and running applications that use the HBase Toolkit</title>
</head>
<body id="spldoc_page">


<h1 class="title topictitle1">Developing and running applications that use the HBase Toolkit</h1>

<div class="body refbody">
<div class="section">
<p class="p">
<a class="xref" href="../toolkits/toolkits.html">IBMStreams com.ibm.streamsx.hbase Toolkit</a> &gt; <a class="xref" href="tk$com.ibm.streamsx.hbase.html">com.ibm.streamsx.hbase 2.2.0</a> &gt; Developing and running applications that use the HBase Toolkit</p>

</div>


<div class="section">
<p class="p">To create applications that use the HBase Toolkit, you must configure either Streams Studio or the SPL compiler to be aware of the location of the toolkit. 
</p>

</div>

<div class="section"><h2 class="title sectiontitle">Before you begin
</h2>

<div class="p">
<ul class="ul">
<li class="li"> Install IBM InfoSphere Streams.  Configure the product environment variables by entering the following command: 
<pre class="pre codeblock">
source product-installation-root-directory/4.0.0.0/bin/streamsprofile.sh
</pre>

</li>

<li class="li"> Install Apache HBase (<a class="xref" href="http://hbase.apache.org/">http://hbase.apache.org/</a>), Apache Hadoop (<a class="xref" href="http://hadoop.apache.org/">http://hadoop.apache.org/</a>)    and Apache Zookeeper (<a class="xref" href="http://zookeeper.apache.org/">http://zookeeper.apache.org/</a>). All of these products are installed as part of IBM InfoSphere BigInsights. 
<ul class="ul">
<li class="li"> This toolkit supports IBM InfoSphere BigInsights version 3.0.0 and later and HBase 0.96 and later versions.  </li>

<li class="li"> <em class="ph i">Note</em>: The host or resource where InfoSphere Streams is installed must be able to communicate with the resources where     HBase is installed, but you do not need both on the same resource.</li>

</ul>
</li>

</ul>

</div>

</div>

<div class="section"><h2 class="title sectiontitle">About this task
</h2>

<p class="p">After the location of the toolkit is communicated to the compiler, the SPL artifacts that are specified in the toolkit can be used by an application. The application can include a use directive to bring the necessary namespaces into scope. Alternatively, you can fully qualify the operators that are provided by toolkit with their namespaces as prefixes.
</p>

</div>

<div class="section"><h2 class="title sectiontitle">Procedure
</h2>

<div class="p">
<ol class="ol">
<li class="li"> For Apache HBase, you must configure your compile and runtime environment by setting the <strong class="ph b">HBASE_HOME</strong> environment variable:
<ul class="ul">
<li class="li"> If your Streams application will be running on the same resource where HBase is installed, set <strong class="ph b">HBASE_HOME</strong> to the directory that contains HBase.</li>

<li class="li"> Otherwise, copy the <tt class="ph tt">/hbase-install-dir/lib</tt> directory to the file system where Streams will be running, making sure to follow symbolic links:
<pre class="pre codeblock">
  cp -Lr path-to-hbase/lib /path-on-streams-host
</pre>

</li>

<li class="li"> Set <strong class="ph b">HBASE_HOME</strong> to the directory you created, for example, to <tt class="ph tt">path-on-streams-host</tt>.</li>

</ul>
</li>

<li class="li"> For IBM BigInsights, you must configure your development environment by setting <strong class="ph b">HBASE_HOME</strong> and <strong class="ph b">HADOOP_HOME</strong> as environment variables.
<ul class="ul">
<li class="li"> If your Streams application will be running on the same resource where BigInsights is installed: 
<ul class="ul">
<li class="li"> Set <strong class="ph b">HADOOP_HOME</strong>:
<ul class="ul">
<li class="li"> For BigInsights 3.x, set it to <tt class="ph tt">/BigInsights_install/IHC</tt>. </li>

<li class="li"> For BigInsights 4.x, set it to <tt class="ph tt">/biginsights_install/hadoop</tt>.</li>

</ul>
</li>

<li class="li"> Set <strong class="ph b">HBASE_HOME</strong> to <tt class="ph tt">/biginsights_install/hbase</tt>.</li>

</ul>
</li>

<li class="li"> If your Streams application will not be running on the same resource as BigInsights, you need to copy the following directories to the file system where Streams will be running:
<ul class="ul">
<li class="li"> Create a directory to contain the HBase and Hadoop libraries, for example, <tt class="ph tt">/home/streams/BI_Install/</tt> on the resource where Streams will be running.</li>

<li class="li"> For BigInsights 3.x, copy <tt class="ph tt">/BigInsights_install/IHC</tt> and <tt class="ph tt">/BigInsights_install/hbase</tt> to the directory you created, making sure to follow symbolic links. For example,
<pre class="pre codeblock">
cp -Lr /BigInsights_install/IHC  /path-on-Streams-host
</pre>

</li>

<li class="li"> For BigInsights 4.x, copy <tt class="ph tt">/BigInsights_install/hadoop</tt>, <tt class="ph tt">BigInsights_install/hadoop-hbase</tt> and <tt class="ph tt">BigInsightsInstall/hbase</tt> to the directory you created.</li>

<li class="li"> Set <strong class="ph b">HBASE_HOME</strong> to <tt class="ph tt">/home/streams/BI_Install/hbase</tt> and <strong class="ph b">HADOOP_HOME</strong> to <tt class="ph tt">/home/streams/BI_install/hadoop</tt> for BigInsights 4.x and <tt class="ph tt">/home/streams/BI_install/IHC</tt> for BigInsights 3.x.</li>

</ul>
</li>

</ul>
</li>

<li class="li"> Supply the operator with HBase configuration information. By default, <strong class="ph b">HBASE_HOME</strong>/<tt class="ph tt">conf</tt> is searched for the <tt class="ph tt">hbase-site.xml</tt>.  If Streams will not be running on the same resource as the HBase installation, you can do one of the following: 
<ul class="ul">
<li class="li"> Create a <tt class="ph tt">conf</tt> directory in the same directory you created in step 1 and copy the <tt class="ph tt">hbase-site.xml</tt> from your HBase installation to that directory.</li>

<li class="li"> Copy the <tt class="ph tt">hbase-site.xml</tt> file from the <tt class="ph tt">conf</tt> directory in your HBase installation into a directory accessible by your application and use the <strong class="ph b">hbaseSite</strong> parameter to specify the path to the copied file.</li>

</ul>
</li>

<li class="li"> Configure the SPL compiler to find the toolkit root directory. Use one of the following methods:
<ul class="ul">
<li class="li"> Set the <strong class="ph b">STREAMS_SPLPATH</strong> environment variable to the root directory of a toolkit     or multiple toolkits (with : as a separator).  For example:
<pre class="pre codeblock">
export STREAMS_SPLPATH=$STREAMS_INSTALL/toolkits/com.ibm.streamsx.hbase
</pre>

</li>

<li class="li"> Specify the <strong class="ph b">-t</strong> or <strong class="ph b">--spl-path</strong> command parameter when you run the <strong class="ph b">sc</strong> command. For example:
<pre class="pre codeblock">
sc -t $STREAMS_INSTALL/toolkits/com.ibm.streamsx.hbase -M MyMain
</pre>

    where MyMain is the name of the SPL main composite.     <strong class="ph b">Note</strong>: These command parameters override the <strong class="ph b">STREAMS_SPLPATH</strong> environment variable.</li>

<li class="li"> Add the toolkit location in InfoSphere Streams Studio.</li>

</ul>
</li>

<li class="li"> Develop your application. To avoid the need to fully qualify the operators, add a use directive in your application. 
<ul class="ul">
<li class="li"> For example, you can add the following clause in your SPL source file:
<pre class="pre codeblock">
use com.ibm.streamsx.hbase::*;
</pre>

     You can also specify a use clause for individual operators by replacing the asterisk (*) with the operator name. For example: 
<pre class="pre codeblock">
use com.ibm.streamsx.hbase::HBASEDelete;
</pre>

</li>

</ul>
</li>

<li class="li"> Build your application.  You can use the <strong class="ph b">sc</strong> command or Streams Studio.  </li>

<li class="li"> Start the InfoSphere Streams instance. Remember to set <strong class="ph b">HBASE_HOME</strong> and <strong class="ph b">HADOOP_HOME</strong> (for BigInsights) as described above as application environment variable(s) on the instance. This can be done using the Streams Console or the <tt class="ph tt">streamtool</tt> utility.</li>

<li class="li"> Run the application. You can submit the application as a job by using the <strong class="ph b">streamtool submitjob</strong> command or by using Streams Studio.  </li>

</ol>

</div>

</div>

</div>


</body>
</html>